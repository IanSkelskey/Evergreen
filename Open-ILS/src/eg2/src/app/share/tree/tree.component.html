<div class="eg-tree-node-wrapper d-flex">
  <input *ngIf="showSelectors" type="checkbox"
      (change)="toggleSelections($event)" />
  <div (click)="expandAll()">
        <span class="material-icons">expand_more</span>
  </div>
  <div (click)="collapseAll()">
        <span class="material-icons">expand_less</span>
  </div>
  <ng-content select="[header]"></ng-content>
</div>
<div class="eg-tree" *ngFor="let node of displayNodes()">
  <div class="eg-tree-node-wrapper d-flex"
    [ngStyle]="{'padding-left': (node.depth * 20) + 'px'}">
    <input *ngIf="showSelectors
       ? (node === tree.rootNode
          ? !disableRootSelector
          : true)
       : false"
      type="checkbox"
      [(ngModel)]="node.selected"
      (change)="handleNodeCheck(node)" />
    <div class="eg-tree-node-expandy">
      <ng-container *ngIf="node.children.length">
        <button (click)="node.toggleExpand()" 
          type="button" class="input-group-text" 
          [attr.title]="node.expanded? 'Close nodes under ' + node.label : 'Open nodes under ' + node.label" 
          [attr.aria-label]="node.expanded? 'Close nodes under ' + node.label : 'Open nodes under ' + node.label" 
          i18n-aria-label i18n-title>
          <span class="material-icons" aria-hidden="true">{{node.expanded? 'expand_less' : 'expand_more'}}</span>
        </button>
      </ng-container>
      <div *ngIf="!node.children.length" class="eg-tree-node-nochild">
       &nbsp; 
      </div>
    </div>
    <div class="eg-tree-node" [ngClass]="{active : node.selected}">
      <button class="btn btn-link" (click)="handleNodeClick(node)">{{node.label}}</button>
    </div>
    <ng-container *ngTemplateOutlet="rowTrailingTemplate; context: {$implicit: node}"></ng-container>
  </div>
</div>
<ng-content select="[footer]"></ng-content>
